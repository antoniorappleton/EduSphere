<!doctype html>
<html lang="pt">

<head>
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width,initial-scale=1" />
   <link rel="stylesheet" href="../../css/base.css" />
   <link rel="stylesheet" href="../../css/admin.css" />

   <title>EduSphere — Admin</title>

   <!-- Supabase -->
   <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
   <script src="../../public/js/supabaseClient.js"></script>
</head>

<body class="home">

   <!-- SHELL Layout -->
   <div id="adminPanel" class="admin-shell">

      <!-- SIDEBAR -->
      <nav class="admin-sidebar">
         <button class="admin-nav-btn active">
            <span class="admin-nav-icon">
               <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                  stroke-linejoin="round">
                  <rect x="3" y="3" width="7" height="7"></rect>
                  <rect x="14" y="3" width="7" height="7"></rect>
                  <rect x="14" y="14" width="7" height="7"></rect>
                  <rect x="3" y="14" width="7" height="7"></rect>
               </svg>
            </span>
            Dashboard
         </button>
         <button class="admin-nav-btn">
            <span class="admin-nav-icon">
               <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                  stroke-linejoin="round">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
               </svg>
            </span>
            Explicadores
         </button>
         <button class="admin-nav-btn">
            <span class="admin-nav-icon">
               <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                  stroke-linejoin="round">
                  <path d="M12 20h9"></path>
                  <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
               </svg>
            </span>
            Logs
         </button>
         <button class="admin-nav-btn" style="margin-top:auto" id="btnLogout">
            <span class="admin-nav-icon">
               <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                  stroke-linejoin="round">
                  <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                  <polyline points="16 17 21 12 16 7"></polyline>
                  <line x1="21" y1="12" x2="9" y2="12"></line>
               </svg>
            </span>
            Sair
         </button>
      </nav>

      <!-- MAIN CONTENT -->
      <main class="admin-main">

         <!-- TOP HEADER -->
         <header class="admin-header-bar">
            <div>
               <h1 class="admin-page-title">Dashboard</h1>
               <p class="admin-subtitle">Bem-vindo à área de administração.</p>
            </div>

            <div class="admin-user-profile">
               <div class="admin-avatar">A</div>
               <span style="font-size:0.9rem; font-weight:500; color:#374151">Administrador</span>
            </div>
         </header>

         <!-- KPI STATS -->
         <section class="admin-stats-row">
            <article class="admin-stat-card">
               <p class="admin-stat-label">Explicadores ativos</p>
               <p class="admin-stat-value">3</p>
            </article>
            <article class="admin-stat-card">
               <p class="admin-stat-label">Total Alunos</p>
               <p class="admin-stat-value">12</p>
            </article>
            <article class="admin-stat-card">
               <p class="admin-stat-label">Sistema</p>
               <p class="admin-stat-value" style="color:#16a34a; font-size:1.1rem; margin-top:8px;">Online</p>
            </article>
         </section>

         <!-- CONTENT CARDS -->
         <div class="admin-grid-2">

            <article class="admin-card">
               <h3>Gerir Explicadores</h3>
               <p>Adicione novos explicadores, edite permissões ou remova acesso à plataforma.</p>
               <button class="button">Ver lista completa</button>
            </article>

            <article class="admin-card">
               <h3>Configurações Globais</h3>
               <p>Definições de sistema, variáveis de ambiente e integrações.</p>
               <button class="button secondary">Aceder configurações</button>
            </article>

            <article class="admin-card" style="grid-column: 1 / -1;">
               <h3>Logs de Atividade</h3>
               <p>Últimas ações registadas na plataforma.</p>

               <div
                  style="background:#f9fafb; border:1px solid #e5e7eb; border-radius:8px; padding:12px; font-family:monospace; font-size:0.85rem; color:#4b5563;">
                  [INFO] Login efetuado: admin@edusphere.pt<br>
                  [INFO] Novo aluno criado: Mariana Silva<br>
                  [INFO] Sistema iniciado com sucesso.
               </div>
            </article>

         </div>

      </main>

   </div>

   <script>
      // Logout logic
      document.getElementById('btnLogout')?.addEventListener('click', async () => {
         await supabase.auth.signOut();
         location.href = '../../index.html';
      });

      // Auth check
      (async () => {
         const { data: { session } } = await supabase.auth.getSession();
         if (!session) { location.href = '../../index.html'; return; }
      })();

      // Simple interaction for sidebar buttons (demo)
      document.querySelectorAll('.admin-nav-btn').forEach(btn => {
         btn.addEventListener('click', (e) => {
            if (btn.id === 'btnLogout') return;
            document.querySelectorAll('.admin-nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
         });
      });
   </script>
</body>

</html>